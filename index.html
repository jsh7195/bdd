<!doctype html>
<html>
<head>
    <title>적대히스토리</title>
    <meta charset="utf-8">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
</head>
<body>
    <div style="display: flex">
        <div style="flex: 1">
            <span>date : 6/20</span>
            <br/>
            <span> ----------- </span>
            <br/>
            <span>57명</span>
            <br/>
            <textarea id="originList">
Lv.62 새싹
Lv.61 유리대포
Lv.62 Feigherzig
Lv.63 소라님
Lv.62 순결그자체
Lv.62 가주
Lv.63 허크
Lv.60 넌이미조밥
Lv.62 까마귀
Lv.63 정상을향하는
Lv.62 탱구
Lv.60 어둠의마법녀
Lv.62 망자사냥
Lv.63 늅이에요
Lv.62 휴지
Lv.62 씨익빌런
Lv.62 아니시에이터
Lv.62 강철폭격기
Lv.63 영원
Lv.62 혈검
Lv.61 대충해
Lv.62 아싸인
Lv.62 핑뀨
Lv.63 HappyS
Lv.63 한닢
Lv.62 헨젤과그랫대
Lv.63 적대
Lv.62 적빛
Lv.63 에어
Lv.62 안산
Lv.63 타오르는김군
Lv.62 너뭐임
Lv.62 현무
Lv.16 추측
Lv.62 리빙
Lv.62 렉시스
Lv.56 내정
Lv.62 가루가루콩가루
Lv.61 떵치
Lv.62 격노
Lv.63 ParkGyu
Lv.61 행이
Lv.62 암스테르담
Lv.62 괴환
Lv.64 용사님
Lv.62 ourr
Lv.62 위장복
Lv.62 유폴성
Lv.61 뚜송이
Lv.62 방씨
Lv.56 빨강
Lv.61 데미소다
Lv.62 돌개의살
Lv.62 키라
Lv.61 Do
Lv.62 슬기러브
Lv.62 벚꽃의
            </textarea> 
        </div>

        <div style="flex: 1">
            <span><a href="https://www.kr.playblackdesert.com/Adventure/Guild/GuildProfile?guildName=%EB%A6%AC%EB%B9%99%EB%8D%B0%EB%93%9C">리빙 길드원</a> 에서 목록 블록쳐서 복붙하셈</span>
            <br/>
            <span>가운데 "길드장" 한줄 삭제 해야함</span>
            <br/>
            <textarea id="curList"></textarea>
        </div>
    </div>
    
    <div id="outlist"></div>
    <div id="inlist"></div>
    <button id="diff">비교</button>
        <script>
        var list;
        var arr;
        var regex;
            
        var curList;
        var curArr;

        (function(){
            regex = /Lv.[0-9][0-9]/gi;
            regex2 = /\s/g;
            regex3 = /\r/g;
            list = $('#originList').text().replace(regex,"")
            //$('#originList').text(list);
            arr = list.split('\n');
            for( var i=0; i<arr.length; i++ ){ if(arr[i].trim().length > 0 ){ arr[i] = arr[i].trim() } else {  }   }
            
            arr.splice(arr.length-1,1);
            
        })()
            
        $(document).on('click','#diff',function(e){
            
            if($('#curList').val().trim() === ''){
                alert("복붙 제대로 하고 눌러");
                return;
            }
                        
            var rst = [];
            var rst2 = [];
            var temp = [];
            
            $('#inlist').text('');
            $('#outlist').text('');
            
            curList = $('#curList').val().replace(regex,"");
            curArr = curList.split('\n');
            
            
            for( var i=0; i<curArr.length; i++ ){ curArr[i] = curArr[i].trim() }

                        
            
            var diffArr = arr;
            var diffArrRev = arr;
            
            //curArr , arr 비교
            for(var j=0; j<arr.length; j++){
                var duple = true;
                for(var k=0; k<curArr.length; k++){
                    if(arr[j] === curArr[k]){
                        duple = false;
                    } else if(arr[j].trim() === '' || curArr[k].trim() === ''){
                        duple = false;
                    }
                }
                
                if(duple){
                    rst.push(arr[j]);
                }
            }
            var a = null;
            a = "나간사람";
            a += "("+arr.length + '->' + curArr.length+") => ";
            a += rst.toString()
            $('#outlist').text(a)
            
            // 들어온사람
            
            //curArr , arr 비교
            for(var j=0; j<curArr.length; j++){
                var duple = true;
                for(var k=0; k<arr.length; k++){
                    if(curArr[j] === arr[k]){
                        duple = false;
                    } else if(curArr[j].trim() === '' || arr[k].trim() === ''){
                        duple = false;
                    }
                }
                
                if(duple){
                    rst2.push(curArr[j]);
                }
            }
            var a2 = null;
            a2 = "드러온사람->";
            a2 += rst2.toString().split(",").join(" , ")
            $('#inlist').text(a2);
            
        })
    </script>
</body>
</html>
